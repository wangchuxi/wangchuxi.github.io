/* 2016-03-02 15:52:53  */
try{!function(){var e,t,n,r,o,i,u,a,c,s,f,h,d;e=function(){var e="__YYF2E__QUALITY";return window.top[e]}(),t=function(e){var t=e.util||{},n={getMid:function(){},getUid:function(){}};for(var r in t)n[r],n[r]=t[r];return n}(e),n=function(){var e={setCookie:function(e,t,n,r,o,i){var u=new Date;u.setTime(u.getTime()),n&&(n=1e3*n*60*60*24);var a=new Date(u.getTime()+n);document.cookie=e+"="+escape(t)+(n?";expires="+a.toGMTString():"")+(r?";path="+r:"")+(o?";domain="+o:"")+(i?";secure":"")},getCookie:function(e){var t=document.cookie.indexOf(e+"="),n=t+e.length+1;if(!t&&e!=document.cookie.substring(0,e.length))return null;if(-1==t)return null;var r=document.cookie.indexOf(";",n);return-1==r&&(r=document.cookie.length),unescape(document.cookie.substring(n,r))}};return e}(),function(e,t){r=function(){return"function"==typeof t?t():t}()}(this,function(){function e(){}return e.generate=function(){var t=e._gri,n=e._ha;return n(t(32),8)+"-"+n(t(16),4)+"-"+n(16384|t(12),4)+"-"+n(32768|t(14),4)+"-"+n(t(48),12)},e._gri=function(e){return 0>e?NaN:30>=e?0|Math.random()*(1<<e):53>=e?(0|Math.random()*(1<<30))+(0|Math.random()*(1<<e-30))*(1<<30):NaN},e._ha=function(e,t){for(var n=e.toString(16),r=t-n.length,o="0";r>0;r>>>=1,o+=o)1&r&&(n=o+n);return n},e}),o=function(e,t,n){var r=n.info,o=n.util,i={typePriority:{write:1,open:2,ajax:3,muObs:4,setAttr:5,scan:6},midKey:"__FEQUALITY__UUID",midTimeout:700,pro:"5253",formatData:function(e){return this.sortQueue(e),e=this.handlerScripts(e)},handlerScripts:function(e){for(var t,n=e.defenceQueue,r=e.undefenceQueue,o=!1,i=0;t=r[i];i++){if("scan"!=t.type||"SCRIPT"!=t.tagName){o=!1;break}o=!0}if(o){for(var u,a=0;u=r[a];a++)u.isDefence=!0;var c=n.concat(r);return{defenceQueue:c,undefenceQueue:[]}}return e},getPro:function(){return this.pro},sortQueue:function(e){var t=this.typePriority;for(var n in e)e[n].sort(function(e,n){var r=t[e.type]||99999,o=t[n.type]||99999;return r>o?1:-1})},formatOnceEid:function(e,t,n){var r=!t.length,o=r?e[0]:t[0];o||(o=n[0]);var i=this.getEid(r,o);return i},formatEachEid:function(e,t,n){for(var r,o=[],i=!1,u=[].concat(t,e),a=0;r=u[a];a++){if("scan"==r.type){if(i)continue;i=!0}o.push(this.getEid(r.isDefence,r))}return o},getStartEid:function(){return[this.pro,o.getHost(window.location.href),"st_art"].join("/")},getEid:function(e,t){return[this.pro,r.host,e?"defence":"undefence",t.type,t.hostSet[0],window.location.pathname.replace("/","-")].join("/")},getYYUID:function(){var e="";if(window.external&&"undefined"!=typeof window.external.getPlayerLoginInfo){var t=window.external.getPlayerLoginInfo().split("&");e=this.strGetUid(t,"account")}else{var n=document.cookie?document.cookie:"";e=this.strGetUid(n.split(";"),"yyuid")}return e},strGetUid:function(e,t){var n;for(var r in e)if(e.hasOwnProperty(r)){var o=e[r].split("="),i=o[0].replace(" ","");i==t&&(n=o[1])}return n},getMid:function(){return this.mid||(this.mid=e.getCookie(this.midKey),this.mid||(this.mid=t.generate(),e.setCookie(this.midKey,this.mid,this.midTimeout,"/"))),this.mid},getDocEl:function(){var e=document.documentElement.outerHTML;return e?encodeURIComponent(e):void 0}};return i}(n,r,e),function(e,t){i=function(){return"function"==typeof t?t():t}()}(this,function(){var e=function(){};return e.prototype={constructor:e,postData:function(e,t,n){var r=this.getId("form"),o=this.getId("iframe"),i=this.initForm(r,o,e,t),u=this.initIframe(o,i);this.doPost(u,i,n)},doPost:function(e,t,n){var r=document,o=null;o=r.head||r.getElementsByTagName("head")[0],!o&&(o=r.body),o.appendChild(t),o.appendChild(e),e.onload=function(){t.parentNode.removeChild(t),e.parentNode.removeChild(e),n&&n()},t.submit()},getId:function(e){return!e&&(e=""),e+(new Date).getTime()+parseInt(1e4*Math.random())},initForm:function(e,t,n,r){var o=document.createElement("form");o.setAttribute("method","post"),o.setAttribute("action",n),o.setAttribute("id",e),o.setAttribute("target",t),o.style.display="none";for(var i in r){var u=r[i],a=document.createElement("input");a.setAttribute("name",i),a.setAttribute("value",u),o.setAttribute("yy_f2e_report",!0),o.appendChild(a)}return o},initIframe:function(e){var t;try{t=document.createElement('<iframe name="'+e+'">')}catch(n){t=document.createElement("iframe")}return t.setAttribute("id",e),t.setAttribute("name",e),t.setAttribute("yy_f2e_report",!0),t.style.display="none",t}},new e}),function(e,t){u=function(){return"function"==typeof t?t():t}()}(this,function(){function e(e){return'"'+e.replace(o,function(e){var t=i[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"'}function t(e){return 10>e?"0"+e:e}function n(r,o){var i,u,a,c,s=o[r],f=typeof s;switch(s&&"object"==typeof s&&"function"==typeof s.toJSON&&(s=s.toJSON(r),f=typeof s),f){case"string":return e(s);case"number":return isFinite(s)?String(s):"null";case"boolean":return String(s);case"object":if(!s)return"null";switch(Object.prototype.toString.call(s)){case"[object Date]":return isFinite(s.valueOf())?'"'+s.getUTCFullYear()+"-"+t(s.getUTCMonth()+1)+"-"+t(s.getUTCDate())+"T"+t(s.getUTCHours())+":"+t(s.getUTCMinutes())+":"+t(s.getUTCSeconds())+'Z"':"null";case"[object Array]":for(a=s.length,c=[],i=0;a>i;i++)c.push(n(i,s)||"null");return"["+c.join(",")+"]";default:c=[];for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(u=n(i,s),u&&c.push(e(i)+":"+u));return"{"+c.join(",")+"}"}}}var r=function(e){return window.JSON&&window.JSON.stringify?window.JSON.stringify(e):n("",{"":e})},o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return r}),a=function(e,t){var n={doGet:function(e,t){var n=new Image(1,1),r=this.formatUrl(e,t.data);n.onload=function(){t.cb&&t.cb(r),n=null},n.onerror=function(){t.cb&&t.cb(r),n=null},n.src=r},doPost:function(t,n,r){e.postData(t,n,r)},formatUrl:function(e,t){/\?/.test(e)?/\?$/.test(e)&&(e+="&"):e+="?";var n="_t="+(new Date).getTime();if(!t)return e+n;for(var r in t)e+=r+"="+encodeURIComponent(t[r])+"&";return e+=n}};return n}(i,u),c=function(e,t,n,r,o){var i=function(){this.init(),this.config=e.config};i.prototype={constructor:i,init:function(){this.info=e.info,this.oncPro="new_content_hijack",this.eachPro="content_hijack",this.sampleQueueName="u_new_f2e_sample",this.dataQueueName="u_new_f2e",this.reportUrl="http://stat.game.yy.com/data.do?",this.reportQueueUrl="http://countmq.sysop.duowan.com/?opt=put&name=",this.reportTpl={act:"/event",dty:"pas",__yafm:"i",mid:n.getMid(),sid:1,yui:n.getYYUID()||""},this.reportSet=[this.reportOnce,this.reportEach,this.reportQueueData,this.reportSample]},report:function(e){var t=this;(!e||0>e)&&(e=0),setTimeout(function(){t.reportAll(t.info.getQueues())},e)},reportStart:function(){var e=(n.getStartEid(),this.generalReport({eid:n.getStartEid(),pro:this.eachPro}));r.doGet(this.reportUrl,{data:e})},reportAll:function(e){var t=this;if(e.defenceQueue.length||e.undefenceQueue.length||e.nodefenceQueue.length){var r=n.formatData(e);this.reportOnce(r,function(){t.reportEach(r),t.reportSample(r),t.reportQueueData(r)})}},reportOnce:function(e,t){if(!this.isReport(this.config.reportOnceRate))return void t();var o=n.formatOnceEid(e.defenceQueue,e.undefenceQueue,e.nodefenceQueue),i=this.generalReport({eid:o,pro:this.oncPro});r.doGet(this.reportUrl,{data:i,cb:t})},reportEach:function(e){for(var t,o=n.formatEachEid(e.defenceQueue,e.undefenceQueue,e.nodefenceQueue),i=0;t=o[i];i++)if(this.isReport(this.config.reportEachRate)){var u=this.generalReport({eid:t,pro:this.eachPro});r.doGet(this.reportUrl,{data:u})}},reportQueueData:function(e){if(this.isReport(this.config.reportQueueRate)){var t={data:o({ver:this.config.ver,pro:n.getPro(),host:this.info.host,url:this.info.url,defenceQueue:e.defenceQueue,undefenceQueue:e.undefenceQueue,nodefenceQueue:e.nodefenceQueue})};r.doPost(this.reportQueueUrl+this.dataQueueName,t,function(){})}},reportSample:function(e){if(this.isReport(this.config.reportSampleRate)){var t={data:o({ver:this.config.ver,pro:n.getPro(),host:this.info.host,url:this.info.url,defenceQueue:e.defenceQueue,undefenceQueue:e.undefenceQueue,nodefenceQueue:e.nodefenceQueue,sample:n.getDocEl()})};r.doPost(this.reportQueueUrl+this.sampleQueueName,t,function(){})}},generalReport:function(e){var t={};for(var n in this.reportTpl)t[n]=this.reportTpl[n];for(var r in e)t[r]=e[r];return t},isReport:function(e){var t=Math.random();return e>=t}};var u=new i;return u}(e,t,o,a,u),s=function(e,t){var n=e.util,r=(e.check,{init:function(){this.info=e.info,this.errorPool=[],this.hook()},hook:function(){if("undefined"!=typeof jQuery&&jQuery.inArray&&jQuery.isEmptyObject){var e=this,r=jQuery;r(document).ajaxError(function(o,i,u){var a={};200==i.status?a={url:u.url,unStr:encodeURIComponent(i.responseText)}:0!=i.readyState&&(a={url:u.url,unStr:encodeURIComponent(t(i))});var c=e.errorPool,s=t(a);if(r.inArray(s,c)<0&&!r.isEmptyObject(a)){c.push(s);var f=e.info.getBaseData("ajax",!1,{srcSet:[a.url],hostSet:[n.getHost(a.url)],unstr:a.unStr});e.info.push(f)}})}}});return r}(e,u),f=function(e){var t=(e.util,e.check),n={init:function(t){this.scanTagSet=["script","link","img","iframe","embed","object"],this.info=e.info,this.scan(t)},scan:function(e){for(var t,n=this.getElSetByTag(),r=this.checkScanSrc(n),o=0;t=r[o];o++){var i=t.isGray||t.isDefence,u=this.info.getBaseData("scan",i,{srcSet:t.srcSet,unstr:encodeURIComponent(t.unstr),hostSet:t.hostSet,tagName:t.tagName});u.hostSet.length&&(i&&t.isGray&&(u.grayList=!0),this.info.push(u))}e&&e()},checkScanSrc:function(e){for(var n,r=[],o=0;n=e[o];o++){var i=t.checkOneNode(n),u=this.defence(n,i);u&&(i.isDefence=1==u?!0:!1,i.unstr=n.outerHTML,i.tagName=n.tagName,r.push(i))}return r},defence:function(e,n){return n.isBlack||n.isNoWhite?n.isBlack&&t.isCanSee(e)?(e.style.display="none",1):-1:0},getElSetByTag:function(){for(var e,t=[],n=0;e=this.scanTagSet[n];n++)for(var r,o=document.getElementsByTagName(e),i=0;r=o[i];i++)t.push(r);return t}};return n}(e),h=function(e){var t=(e.util,e.check),n={init:function(){this.info=e.info,this.reportPrefix="yy_f2e_report",this.srcPrefix="yy_f2e_src",this.srcNameMap={src:"yy_f2e_src",href:"yy_f2e_href"},this.hook(window)},hook:function(e){if(e)try{e.MutationObserver&&this.mutationObserver(e),e.Element&&this.hookSetAttr(e),this.hookIframe(e)}catch(t){}},mutationObserver:function(e){var n=this,r=new MutationObserver(function(e){e.forEach(function(e){for(var r=e.addedNodes,o=0,i=r.length;i>o;o++){var u=r[o];if(u.nodeType==Node.ELEMENT_NODE&&!u.getAttribute(n.reportPrefix)&&u.getAttribute(t.getElSrcName(u))){u.setAttribute(n.reportPrefix,!0);var a=u.tagName,c=t.getElSrcName(u,a);if("A"===a||!c)continue;var s=n.check(u,c);if(s.isBlack||s.isNoWhite){var f=s.isGray||s.isDefence,h=n.info.getBaseData("muObs",f,{srcSet:s.srcSet,unstr:s.unstr,hostSet:s.hostSet});f&&s.isGray&&(h.grayList=!0),n.info.push(h)}}}})});r.observe(e.document,{subtree:!0,childList:!0})},hookSetAttr:function(e){var n=e.Element.prototype.setAttribute,r=this;e.Element.prototype.setAttribute=function(e,o){var i=!1;if(t.checkIsSetSrc(e,this)&&!this.getAttribute(r.reportPrefix)){this.setAttribute(r.reportPrefix,!0);var u=r.checkSetAttr(this,e,o);if(u.isBlack&&(i=!0),u.isBlack||u.isNoWhite||u.isGray){var i=u.isGray||u.isDefence,a=r.info.getBaseData("setAttr",i,{srcSet:u.srcSet,unstr:u.unstr,hostSet:u.hostSet});i&&u.isGray&&(a.grayList=!0),r.info.push(a)}}!i&&n.apply(this,arguments)}},checkSetAttr:function(e,n,r){var o=t.checkOneNode(e,n,r);return o.isDefence=!1,e.setAttribute(this.srcNameMap[n],r),o.isBlack&&(t.isCanSee(e)&&(e.style.display="none"),o.isDefence=!0),o.unstr=encodeURIComponent(e.outerHTML),o},check:function(e,n){var r=t.checkOneNode(e,n);return r.isDefence=!1,r.unstr=encodeURIComponent(e.outerHTML),r.isBlack&&(e.setAttribute(this.srcNameMap[n],e.getAttribute(n)),e.setAttribute(n,""),t.isCanSee(e)&&(e.style.display="none"),r.isDefence=!0),r},hookIframe:function(e){var t=this;e.document.addEventListener&&e.document.addEventListener("DOMNodeInserted",function(e){var n=e.target;"IFRAME"==n.tagName&&t.hook(n.contentWindow)})}};return n}(e),d=function(e,t,n,r,o){function i(){t.init(),r.init(),n.init(function(){e.report(2e3)}),e.reportStart()}i()}(c,s,f,h,e)}()}catch(e){var doGet=function(e){var t=new Image(1,1);t.onload=function(){t=null},t.src=e},reportUrl="http://stat.game.yy.com/data.do?act="+encodeURIComponent("/event")+"&dty=pas&__yafm=i&pro=content_hijack&mid=1&sid=1&eid=err_or/footer/"+encodeURIComponent(window.location.host),reportQueueUrl="http://countmq.sysop.duowan.com/?opt=put&name=u_new_f2e_error&data=footer|"+window.location.host+"|"+window.location.href+"|"+encodeURIComponent(e.message)+"|"+encodeURIComponent(navigator.userAgent);doGet(reportUrl),Math.random()<.1&&doGet(reportQueueUrl)}