/*! Project: 5253.com
 *  Version: 1.0.0
 *  Date: 2015-07-22 05:53:24 PM
 *  Author: guoshengze
 */!function(a){function b(){a(".close_yd_pop,#cancelCreate").bind("click",function(b){a("#ydName,#ydImgCode").val(""),a("#errorMsg").html(""),a("#saveGameWrap,#saveGameWrap .yd_pop").hide(),a("#saveGameWrap .yd_pop").removeClass("active"),f(b),g(b)}),a("#toCreateYd").bind("click",function(b){a("#saveGameWrap .yd_list").hide(),a("#saveGameWrap .yd_create").show(),a("#ydName,#ydImgCode").val(""),a("#errorMsg").html(""),a("#saveGameWrap .yd_list").removeClass("active"),a("#saveGameWrap .yd_create").addClass("active"),e(),f(b),g(b)}),a("#ydName,#ydImgCode").bind("focus",function(){a("#errorMsg").html("")}),a("#imgCode").bind("click",function(){e()}),a("#saveCreate").bind("click",function(b){f(b),g(b);var d=a.trim(a("#ydName").val()),i=a.trim(a("#ydImgCode").val());return d?d.length<8||d.length>30?void a("#errorMsg").html("游单标题长度不合法(正确长度为8-30)。"):i?void(l||(l=1,a.post("http://www.5253.com/gamegroup/saveaddedgamegroup",{title:d,validateCode:i},function(b){b=a.parseJSON(b),b.result?(a(".yd_create").hide(),a(".yd_list").show(),c(h)):(a("#errorMsg").html(b.message),e()),l=0}))):void a("#errorMsg").html("验证码不能为空"):void a("#errorMsg").html("游单标题不能为空")}),a("#saveGameWrap").bind("mousewheel",function(a){f(a),g(a)})}function c(b){b&&(h=b),a.post("http://www.5253.com/gamegroup/getusergamegroups",{},function(c){if(c.result){for(var e="",h=0,i=c.groups.length;i>h;h++)e+='<li><a href="javascript:;" class="add_this_yd" grid="'+c.groups[h].id+'"><i><img src="'+c.groups[h].coverImage+'"/></i>'+c.groups[h].title+"</a></li>";a("#ydList li:gt(0)").remove(),a("#ydList").append(e)}a(".add_this_yd").unbind("click"),a(".add_this_yd").bind("click",function(c){d(b,a(this)),f(c),g(c)}),a("#saveGameWrap .yd_create").removeClass("active"),a("#saveGameWrap .yd_list").addClass("active"),a("#saveGameWrap,#saveGameWrap .yd_list").show()},"json")}function d(b,c){var d=c.attr("grid");k||(k=1,a.post("http://www.5253.com/gamegroup/savegametogamegroup",{gameGroupId:d,gameId:b},function(c){c.result?(a("#saveGameWrap,#saveGameWrap .yd_pop").hide(),a(".save.mod_save_down[gid="+b+"]")[0]&&a(".save.mod_save_down[gid="+b+"]").addClass("active")):alert(c.message),k=0},"json"))}function e(){a("#imgCode").attr("src","http://www.5253.com/img_validate/code?t="+(new Date).valueOf())}function f(a){a&&a.stopPropagation?a.stopPropagation():window.event.cancelBubble=!0}function g(a){return a&&a.preventDefault?a.preventDefault():window.event.returnValue=!1,!1}if(a){var h,i="#saveGameWrap{ display:none;width:100%;height:100%;position:fixed;_position:absolute;top:0;left:0;z-index:10000;background:#999999;background:rgba(0,0,0,.2);}#saveGameWrap .yd_list{display:none;width:320px;position:fixed;_position:absolute;top:50%;left:50%;box-shadow:0 0 15px #333;background:#fff;margin:-160px;margin-top:-250px;overflow:hidden;}#saveGameWrap .yd_list h3{width:100%;height:32px;line-height:32px;color:#fff;text-align:center;background:#333;position:relative}#saveGameWrap .yd_list h3 .close_yd_pop{display:block;width:15px;height:15px;background:url(http://assets.dwstatic.com/project/5253/5253.com_v3/img/close.gif) no-repeat 0 0;position:absolute;top:8px;right:5px;text-indent:-9999px;overflow:hidden;}#saveGameWrap .yd_list h3 .close_yd_pop:hover{background-position:0 -15px}#saveGameWrap .yd_list ul{width:100%;max-height:400px;_height:400px;overflow-x:hidden;overflow-y:scroll;position:relative;}#saveGameWrap .yd_list ul li{border-bottom:1px solid #f8f8f8}#saveGameWrap .yd_list ul li a{display:block;width:100%;height:30px;padding:10px 0;line-height:30px;text-indent:70px;position:relative;text-decoration:none}#saveGameWrap .yd_list ul li a:hover{background:#f8f8f8}#saveGameWrap .yd_list ul li a i{display:block;width:28px;height:28px;overflow:hidden;position:absolute;top:10px;left:30px;background:url(http://assets.dwstatic.com/project/5253/5253.com_v3/img/add-yd-ibg.gif) no-repeat 0 0}#saveGameWrap .yd_list ul li a i img{display:block;width:100%;height:100%}#saveGameWrap .yd_list ul li a.first i{background-position:0 -30px}#saveGameWrap .yd_create{display:none;width:480px;height:310px;margin:-240px;margin-top:-125px;position:fixed;_position:absolute;top:50%;left:50%;box-shadow:0 0 15px #333;background:#fff;zoom:1;}#saveGameWrap .yd_create h3{width:100%;height:32px;line-height:32px;color:#fff;text-align:center;background:#333;position:relative}#saveGameWrap  .yd_pop{z-index:1;}#saveGameWrap  .yd_pop.active{z-index:10;}#saveGameWrap .yd_create h3 .close_yd_pop{display:block;width:15px;height:15px;background:url(http://assets.dwstatic.com/project/5253/5253.com_v3/img/close.gif) no-repeat 0 0;position:absolute;top:8px;right:5px}#saveGameWrap .yd_create h3 .close_yd_pop:hover{background-position:0 -15px}#saveGameWrap .yd_create .yd_title_wrap{width:390px;margin:0 auto;padding-top:30px;overflow:hidden}#saveGameWrap .yd_create .yd_title_wrap h5{width:75px;line-height:35px;float:left}#saveGameWrap .yd_create .yd_title_wrap input{width:310px;height:35px;line-height:35px;border:1px solid #e6e6e6;text-indent:10px;color:#666;float:left}#saveGameWrap .yd_create .yd_code_wrap{width:390px;overflow:hidden;padding:30px 0 0;margin:0 auto}#saveGameWrap .yd_create .yd_code_wrap h5{width:75px;line-height:35px;float:left}#saveGameWrap .yd_create .yd_code_wrap input{float:left;width:120px;height:35px;line-height:35px;border:1px solid #e6e6e6;text-indent:10px;color:#666}#saveGameWrap .yd_create .yd_code_wrap img{display:block;float:left;width:100px;height:30px;margin-top:2px;margin-left:2px;cursor:pointer}#saveGameWrap .yd_create .op_btn{padding:20px 0;text-align:center}#saveGameWrap .yd_create .op_btn .save_create{display:inline-block;width:100px;height:35px;line-height:35px;text-align:center;background:#60b928;color:#fff;font-size:14px;margin-right:20px}#saveGameWrap .yd_create .op_btn .save_create:hover{background-color:#6dc834}#saveGameWrap .yd_create .op_btn .cancel_create{display:inline-block;width:98px;height:33px;line-height:33px;text-align:center;background:#f8f8f8;color:#969696;border:1px solid #e6e6e6;font-size:14px}#saveGameWrap .yd_create .op_btn .cancel_create:hover{background-color:#6dc834;border-color:#6dc834;color:#fff}#saveGameWrap .yd_create p.msg{width:390px;margin:0 auto 5px;color:#b4b4b4;font-size:12px}#saveGameWrap .yd_create p.error_msg{width:390px;margin:0 auto 5px;color:red;font-size:12px}",j='<div id="saveGameWrap"><div class="yd_pop yd_list"><h3>加入游单<a href="javascript:;" class="close_yd_pop">关闭按钮</a></h3><ul id="ydList"><li><a href="javascript:;" id="toCreateYd" class="first"><i></i>创建新游单</a></li></ul></div><div class="yd_pop yd_create"><h3>创建游单<a href="javascript:;" class="close_yd_pop"></a></h3><div class="yd_title_wrap"><h5>游单标题：</h5><input placeHolder="请输入游单名称" id="ydName" type="text" /></div><div class="yd_code_wrap"><h5>验证码：</h5><input type="text" id="ydImgCode" placeHolder="请输入验证码" /><img src="http://www.5253.com/img_validate/code" id="imgCode" alt="刷新验证码" title="点击刷新验证码" /></div><div class="op_btn"><a href="javascript:;" id="saveCreate" class="save_create">保存</a><a href="javascript:;" id="cancelCreate" class="cancel_create">取消</a></div><p class="msg">注：您可以稍后通过个人中心完善该游单，信息完善质量优质的游单将更有机会获得官方推荐，让您获得更多关注！</p><p id="errorMsg" class="error_msg"></p></div></div>',k=0,l=0;a("head").append('<style type="text/css">'+i+"</style>"),a("body").append(j),window.updateUserGameGroups?!0:window.updateUserGameGroups=c,b()}}($);