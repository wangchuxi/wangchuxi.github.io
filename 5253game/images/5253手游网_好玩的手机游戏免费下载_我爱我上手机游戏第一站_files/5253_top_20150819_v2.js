/*! Project: 5253.com
 *  Version: 1.0.0
 *  Date: 2015-12-10 02:51:39 PM
 *  Author: jaychen
 */!function(a){function b(){var b=g("yyuid"),d=g("username");(b||d)&&a.getJSON("http://www.5253.com/oauth/userinfois?jsoncallback=?",{},function(b){b.user&&(a("#registerLi").hide(),a("#userFaceWrap").html('<img src="'+b.user.avatarUrl+'" width="100%"/>').find("img"),a("#userLogin").bind("mouseover",function(){a(this).next().next().show(),a(this).parent().parent().parent().parent().bind("mouseleave",function(){a("#userLogin").next().next().hide()}),a("#userHome").attr("href","http://www.5253.com/user/"+b.user.userId),a("#userData").attr("href","http://www.5253.com/user/info"),a("#userMessage").attr("href","http://www.5253.com/user/message"),a("#loginOut").bind("click",function(){return c(),a("#userLogin").unbind("mouseover"),a("#userLogin").next().hide(),!1})}).attr("login",1).html(b.user.nickName))})}function c(){a.getJSON("http://www.5253.com/oauth/logout?jsoncallback=?",{},function(b){b.oauthCookieDelUrl&&(UDB.sdk.PCWeb.deleteCrossmainCookieWithCallBack(b.oauthCookieDelUrl),a("#userLogin").attr("login",0).html("登录"),a("#registerLi").show())})}function d(b){a.getJSON("http://www.5253.com/search/searchgameajax",{keyword:b},function(b){if(k+=1,!(j>k)&&200===b.status){var c,d,e="";if(b.data.gameList&&b.data.gameList.length>0)for(var f=0,g=b.data.gameList.length;g>f;f++)c="http://"+window.location.host+"/game/"+b.data.gameList[f].game.gameId+".html",e+='<li><a href="'+c+'" target="_blank" class="game"><span class="img"><img src="'+b.data.gameList[f].game.iconFullUrlW32H32+'" /></span><span class="name">'+b.data.gameList[f].game.gameName+"</span></a></li>";if(b.data.contentList&&b.data.contentList.length>0)for(var f=0,g=b.data.contentList.length;g>f;f++)b.data.contentList[f].object&&(2===b.data.contentList[f].contentType&&(d="http://"+window.location.host+"/articles/"+b.data.contentList[f].object.id+".html"),e+='<li><a href="'+d+'" target="_blank" class="text">'+b.data.contentList[f].object.title+"</a></li>");e&&(a("#searchRes").html(""),a("#searchRes").show().html(e),a("#searchRes li").bind("mouseover",function(){a("#searchRes li").removeClass("selected"),a(this).addClass("selected")}))}})}function e(){window.scrollTo(0,0),a("#microMessage").bind("mouseover",function(){a(this).find(".qrcode_hover").show()}).bind("mouseleave",function(){a(this).find(".qrcode_hover").hide()}).bind("click",function(){return!1}),a("#userLogin").bind("click",function(){var b=a(this).attr("login"),c="5253.com",d="http://www."+c,e=d+"/udb/showlogin",f=null,g=d+"/udb/loginCallback?callback=kk_udb_login_callback",h=a(this).attr("redirecturl"),i=d+"/udb/cancellogin";b&&1==b||(document.domain==window.location.host||void 0!=f&&null!=f||(f=document.domain),null!=h&&""!==h&&(g=g+"&sourceurl="+encodeURIComponent(h)),void 0!=f&&null!=f&&(g=g+"&domain="+f,i=i+"?domain="+f),UDB.sdk.PCWeb.popupOpenLgn(e,g,i))}),a(".nav_wrap .nav .logo").bind("click",function(){location.href="http://www.5253.com/"}).css("cursor","pointer"),window.onscroll=function(){var b=document.documentElement.scrollTop||document.body.scrollTop;if(b>76){if(a("#navWrap").addClass("fixed_nav"),navigator.userAgent.toLowerCase().match("msie 6.0")&&a("#navWrap").css("top",b+"px"),a(".side_wrap")[0]&&navigator.userAgent.toLowerCase().match("msie 6.0")){var c=a(".side_wrap");c.css("position","absolute"),c.css("top",b+300+"px")}}else a("#navWrap").removeClass("fixed_nav"),navigator.userAgent.toLowerCase().match("msie 6.0")&&a("#navWrap").css("top",0);a("#saveGameWrap")[0]&&navigator.userAgent.toLowerCase().match("msie 6.0")&&a("#saveGameWrap").css("top",b+"px"),a("#guideWrap")[0]&&a("#guideWrap").css("top",b+"px")},a("#mainTitle li a").bind("mouseover",function(){var b=a("#navWrap"),c=a(window).width(),d=a(this).attr("ul-index"),e=a(this).offset().left,f=a(this).width(),g=0;return d?(a("#hovBar ul").hide(),a("#mainTitle li a[ul-index]").removeClass("active"),a(this).addClass("active"),a("#hovBar,#titleItem_"+d).show(),g=a("#titleItem_"+d).width(),void a("#titleItem_"+d).css({left:e+f/2-parseInt(g/2,10)-(c-b.width())/2+"px"})):(a("#hovBar").hide(),void a("#mainTitle li a[ul-index]").removeClass("active"))}),a("#navWrap").bind("mouseleave",function(){a("#hovBar").hide(),a("#mainTitle li a[ul-index]").removeClass("active")}),a("#searchKey").bind("keyup focus",function(){var b=a(this),c=b.val(),e=b.attr("pre_v");b.attr("pre_v",c),c?e&&c===e||(j+=1,d(c)):a("#searchRes").html("")}).bind("blur",function(){setTimeout(function(){a("#searchRes").hide()},200)}),a("#searchKey").keydown(function(b){function c(b){var c=a("#searchRes li"),d=a("#searchRes li.selected").index(),e=c.size();c.removeClass("selected"),"up"===b?c.eq(--d).addClass("selected"):"down"===b&&(d===e-1?c.eq(0).addClass("selected"):c.eq(++d).addClass("selected"))}switch(b.keyCode){case 38:c("up");break;case 40:c("down");break;case 13:var d=a("#searchRes li.selected a").attr("href");d?window.open(d):a.trim(a("#searchKey").val())&&(location.href="http://www.5253.com/search.html?searchKey="+a("#searchKey").val())}}),a("#searchBtn").bind("click",function(){var b=a("#searchKey").val();return b&&(location.href="http://www.5253.com/search.html?searchKey="+b),!1})}function f(){var b=a('a[data-count="pv"]'),c=null;b.click(function(){c&&clearTimeout(c),c=setTimeout(function(){var b=g("yyuid");a("body").append('<iframe src="http://yxtq.yy.com/v3/tq/loginticket.do?para=_jump%3D5253_web&from=5253_web&report=1&uid='+b+'" style="display: none;"></iframe>')},200)})}function g(a){var b=document.cookie.indexOf(a+"="),c=b+a.length+1;if(!b&&a!=document.cookie.substring(0,a.length))return null;if(-1==b)return null;var d=document.cookie.indexOf(";",c);return-1==d&&(d=document.cookie.length),decodeURI(document.cookie.substring(c,d))}function h(){var b=a("#mainTitle"),c=b.find("a"),d=a("#hovBar"),e=d.find("a");c.eq(0).hasClass("keep_active")&&(c.each(function(b,c){a(c).attr("data-dwclick","dwclick"),a(c).attr("data-ckstat","home_main_nav"+b)}),e.each(function(b,c){a(c).attr("data-dwclick","dwclick"),a(c).attr("data-ckstat","home_sub_nav"+b)}))}function i(){var b,c,d,e,f=a("#scoreValue"),g=a("#scoreDesc"),h=a("#scoreUp"),i=a("#scoreDown"),j=a("#vsBox");location.pathname.match(/\d.+\d/g)&&(e=location.pathname.match(/\d.+\d/g)[0]),e&&(b="/game/"+e+"/score",a.ajax({url:b,type:"POST",dataType:"json",success:function(a){200==a.status&&(c=a.data,d=c.gameScore,f.html(c.gameScoreStr),g.html(c.gameScoreDesc),h.html(d.up),i.html(d.down),j.css("left","-"+(100-10*d.score)+"px"))}}))}var a=a||null,j=0,k=0;a&&(!function(a){var b=location.href.split(".com/")[1]&&location.href.split(".com/")[1].split("/")[0]&&location.href.split(".com/")[1].split("/")[0],c=b.match("game|android|ios|gamegroup|gametag|testtime"),d=b.match("zhuanlan"),e=b.match("video|podcast"),f=b.match("articles");return f?(a("#mainTitle li a").removeClass("keep_active"),void a("#mainTitle li").eq("5").find("a").addClass("keep_active")):c?(a("#mainTitle li a").removeClass("keep_active"),void a("#mainTitle li").eq("3").find("a").addClass("keep_active")):d?(a("#mainTitle li a").removeClass("keep_active"),void a("#mainTitle li").eq("1").find("a").addClass("keep_active")):e?(a("#mainTitle li a").removeClass("keep_active"),void a("#mainTitle li").eq("2").find("a").addClass("keep_active")):location.href.split(".com/")[1]?void a("#mainTitle li a").removeClass("keep_active"):void 0}(a),document.write('<link rel="stylesheet" href="http://assets.dwstatic.com/project/5253/5253.com_v3/css/setup-name.css" type="text/css">'),document.write('<script src="/resource_combine/js/??/js/groundhog.js,/js/lib/jquery.scrollLoading-min.js,/js/lib/jquery.simplemodal.1.4.4.min.js,/js/lib/jquery.placeholder.js,/js/lib/LAB.min.js,/js/oauth/loginhandler.js?t=4831885" ></script>'),a("body").append('<div id="setup-name-dialog" class="setup-name simplemodal-data" style="display: none;"><div class="sn-title"><h4>设置您的5253昵称</h4><a href="javascript:;" class="close simplemodal-close"></a></div><div class="sn-cont"><div class="clear"><div class="user-pic"><img src="/resources/images/user-icon40.jpg"></div><div class="txtbox"><input type="text" value="" placeholder="请输入昵称"><div class="txtbox-msg" style="">请输入中文英文下划线分割线</div></div></div><a class="finish" href="javascript:;">完成</a></div></div>'),b(),e(),f(),h(),i(),function(a){var b=a(".join-yd");b[0]&&a.getScript("http://assets.dwstatic.com/project/5253/5253.com_v3/js/yd_pop.js",function(){b.unbind("click"),b.bind("click",function(){var b=a(this).attr("game-id");1===parseInt(a("#userLogin").attr("login"))?updateUserGameGroups(b):alert("要登录才行收藏哦")})})}(a))}($);